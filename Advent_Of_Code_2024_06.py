# -*- coding: utf-8 -*-
"""
Created on Fri Dec  6 10:52:54 2024

@author: adam.davitt
"""

actual_in=['................................##..........................................................................#.......#.............',
'...#.......................................................................................................#......................',
'.#.....................#.............................................#................#..................#...#..#.#..#...#........',
'.#........................#....#.#.#..........................................#...............................................#...',
'..................#.......................................................#.......#.............#.................................',
'........................................#...................................#.........#......#...............#......#......#......',
'......#...#.......#..............#.....#..#....................#.................................................#......#.........',
'......................#...................#....#....................................#.#........................#.........#...#....',
'....................#..........................................................................................#..................',
'..#.........................#.............#...............#.......................................................................',
'.#...............................#...............................#...#................#.........#......................#..........',
'...#.....................................#.........#.............#...................#.......#........................#......#....',
'#...........................#............................#.............................#........................................#.',
'.........................#................#...........#..........................#.#..............................................',
'...........#.#.......#...#.............#.................................#............................................#...#.......',
'....#.......................#.......#..........#....................................#...............................#.#..#........',
'....#............#.......#.............................#..................#......#......#..............#.............#.....#.#....',
'...................................#..............#............#...#..............................................#...............',
'..............................#....#.#........#......................#...................#........#..#............................',
'....................................#.#....#.............................................#....#......#...................#........',
'..................##..................#........#.....#.........................................#.......#............#.............',
'.............#......................................................##...................................................#......#.',
'#......#................#.......................##...............#.....#.......................#..#.........#.............#...#...',
'.............................................................................................................#.....#..............',
'.......#..........#...............#.....##......#.......#.................#............#..........................................',
'.......#.............#.........................................................#................................................#.',
'...........#.......................#.....#...............#..............#........#.....#.........#.........................#......',
'.........#........#...............#................................................................#......#..........#............',
'..............#..................#...#...............................#.#.................................#.............#........#.',
'.....................#.......#..............................#........................#...........#....#.................#.......#.',
'..........#..................................#......#..#................##.........................................#..........#...',
'.....................#.....#.........#.....#...............#..........................................#.........................#.',
'..........#...#..............................#...................#.........#........................................#.............',
'.......#.........................................................................#..........#............#..#..........#..........',
'.....#..#..#...............#....................#..............#...........#.....#.....................#..........................',
'................................................#.............................................................................#...',
'................#.......................................................................................#.........................',
'.............#...#.......................#..................................................#....#................................',
'...............................#.......#.#.............................................#....................#....#................',
'......#....................................................#.......#......#.................................................#.....',
'...........................................................#..........................#.#.....#................#.................#',
'....#....#............#.........................#..#.........................#..................#......#...#.........##...........',
'...#..................#................................#......#.............#.#............................#......................',
'..........................#.............................................................................##........................',
'..............................................................................#.................#..........##.....................',
'....#.....................#.................#......................#...........#.........................................#........',
'..................................#..#....#.................................................................#............#.....#.#',
'.#.........................#.........................#....................#......................................#................',
'................##...........................#....................................................................................',
'.........#........................................#...........................#........#.........#.......#......#.......#...#...#.',
'.#..................................................................................#.........#..................................#',
'....#...............#..........................#.....#....................................................#.......................',
'.......................#.............................#......#...........^........#................................................',
'#.#..#.....#...................##..........#...................................................................................#..',
'..#....#.....................................................#...#.............#....#............#..#............................#',
'........................#..........#.....#............#...........#...............#............#....#.................#........#..',
'.................................#.............#...#..................#................................................#..........',
'...........#............................................................................#................#....................#...',
'..#.........#.............................#............................#....................#....................#................',
'.................................#..#................#................#...........................................................',
'.......................#.......................................#........................#................#......#...........#.....',
'#..............#.......#.........#...#.....#......#.....................#...#....#.......................................#........',
'.........#.#.............................#....#.......#..........................................................#................',
'...#............................................................................................#.................................',
'....................#...................#....................#..............#......#..#.............#.............................',
'...........#.....................................................##...............................................................',
'.....#......#...............................................................................#........#...................#........',
'..............................................#.............#....#................................................................',
'......................#.....................#........................................................#...#.........#..#.....#.....',
'..#...............................................................#..#....................#.#.....................................',
'............................................#...............#.....#.....#...#..#..................................................',
'.#...........................................................................#....................................................',
'.............................................................................................................#....................',
'#....................................................#..............##.......................................#....................',
'#..#....................#.......#...................................................................#...#.........................',
'..#........................................#............#...............................................................#.........',
'...............#...........................#...................#....#......#..................................#....#...........#.#',
'..........##........#.........................#.......#..#.........#...............#........#........#..........#.................',
'....##.......................................#...........#...................#......#.............................................',
'..............................#.........#............................#.............................................#..............',
'......#........#...........................#..................................#.....#.............................................',
'...............#.........#.....#.............#.............#...............#.#...............................................#....',
'........................................#...............................................................................##.#...#..',
'................#.......#.....#........................................................................#........................#.',
'....................................................................................#.........................................#...',
'........................................................................................#...#.....................................',
'........................#.#.........................................................................................#......#....##',
'......#.........................#.............#...................................................................................',
'................#...........................#..............#...#..........................#.......#......##.................#..#..',
'....................................................#.#.................................#....#....................................',
'#..................................#...............................................#......#.#.............#.......................',
'.....#..........#.....................................................................................#.#.......#............#....',
'..#.........................................................#...................#..................................#..###.#.....#.',
'...#.#..........#.........#..#......................#..##...#.......#..#.#.#...............#.....#....#...........................',
'...........#.....#...........#........................................................#..................#........................',
'.................#........#.......#...................#...#.......#.....#........#..#.............................................',
'...............................................#.......................#..................#.......................................',
'....#...................#.#......#............#...................#..........#..##................................................',
'....#........................#...........................................................#..................#..#.............#....',
'............#...............................................#.....................................................................',
'.........#.......#...................#...........#...............#....................#................#...#..#.......#...........',
'...............#...........................................................................#.....................#................',
'.............#....#.........................................................#............#....#.#....#.....#..#................#..',
'..#...............#.........................................................#........##.....#...#.........................#.......',
'..........................#.....................................#.................................#...............................',
'..#.............#...#...............................#.................................................................##..........',
'......#........#........................#..........................#..............................................#...............',
'......#.........................#..#.............................................................................................#',
'..................................................#..................#.....#...........#....#...#..........#................#.....',
'....#.....................................#..........#.....#......#..........#....................................................',
'...............................#...#...###.#.............................................................#...................#....',
'...#...................................#.....#...#....................#........................#..#.......................#......#',
'....#...#........#...................#..........#......................................#............#.............................',
'#.................................#.....................#.................#................#...#.#................................',
'.................................#.......#...........#..#...#......#.......#.........................#............................',
'.......................................##..........................#..................................................#...........',
'......#............#.##.........#...............#..........#....#.......................................#..#.................#....',
'.....#............................#.....#..................................................#.......#......................#.......',
'.............#.......................................................#...#...#....#...................#...........................',
'......#.................#.#................................#..#...............#.............................#....#...........#....',
'...............#...##......#.............................#.......................................#................................',
'#..................................................#.........#....#....#.....#...................#.#....#.....#...................',
'......#...#...##.................................................................#............................#...............#...',
'.#..................................#.#...............#................................#...#......................................',
'.........#.......#...#.......................#..................................................#.#................#..............',
'..................#............................#.....#.....#........#.....................#........................#.......#..#...',
'..#.............................#.............#.#................................................#.#.##....................#......',
'.......#.#......................#.#.....................................................##.............#..........................',
'..............#...#........................#................................#.........#.......................#..........#........',
'.......................#...............................#..#.........#.............................................................']

mini_in = ['....#.....',
'.........#',
'..........',
'..#.......',
'.......#..',
'..........',
'.#..^.....',
'........#.',
'#.........',
'......#...']



def Rotate(my_dir):
    if my_dir == [-1,0]:
        return [0,1]
    elif my_dir == [0,1]:
        return [1,0]
    elif my_dir == [1,0]:
        return [0,-1]
    else:
        return [-1,0]

'''----------------------------- PART 1 ------------------------------------'''

my_in = actual_in


  
for i in range(len(my_in)):
    for j in range(len(my_in[0])):
        if my_in[i][j]=='^':
            r , c = i , j
            my_in[i]=my_in[i][:j]+'.'+my_in[i][j+1:]

visited = [[r,c]]

my_dir = [-1,0]

while r+my_dir[0]>=0 and r+my_dir[0]<len(my_in) and c+my_dir[1]>=0 and c+my_dir[1]<len(my_in[0]):
    if my_in[r+my_dir[0]][c+my_dir[1]]=='.':
        r+=my_dir[0]
        c+=my_dir[1]
        if [r,c] not in visited:
            visited+=[[r,c]]
    else:
        my_dir = Rotate(my_dir)
print(len(visited))

# 4977

'''----------------------------- PART 2 ------------------------------------'''



my_in = actual_in


  
for i in range(len(my_in)):
    for j in range(len(my_in[0])):
        if my_in[i][j]=='^':
            start_r , start_c = i , j
            my_in[i]=my_in[i][:j]+'.'+my_in[i][j+1:]

loops=[]  

for i in range(len(my_in)):
    for j in range(len(my_in[0])):
        print(str(i) + '; '+str(j))
        if my_in[i][j] != '#':
            r = start_r + 0
            c = start_c + 0
            my_dir = [-1,0]
            visited = [[r,c,my_dir]]
            f=0
            while r+my_dir[0]>=0 and r+my_dir[0]<len(my_in) and c+my_dir[1]>=0 and c+my_dir[1]<len(my_in[0]) and f==0:
                if my_in[r+my_dir[0]][c+my_dir[1]]=='.' and [r+my_dir[0] , c+my_dir[1]] != [i,j]:
                    r+=my_dir[0]
                    c+=my_dir[1]
                    if [r,c,my_dir] not in visited:
                        visited+=[[r,c,my_dir]]
                    else:
                        f=1     
                else:
                    my_dir = Rotate(my_dir)
            if f==1:
                loops+=[[i,j]]
print(len(loops))

# 1729